<!DOCTYPE html>
<html>
<head>
    <title>Nettoyage Cache Frontend</title>
</head>
<body>
    <h1>üßπ Nettoyage Cache Frontend</h1>
    <div id="results"></div>
    
    <script>
        function clearFrontendCache() {
            const results = document.getElementById('results');
            results.innerHTML = '<h2>üîÑ Nettoyage en cours...</h2>';
            
            try {
                // Nettoyer toutes les cl√©s li√©es √† la base de donn√©es
                const keysToRemove = [
                    'activeDbConfig',
                    'selectedTenant',
                    'tenant_info',
                    'database_type',
                    'created_articles',
                    'created_clients',
                    'created_suppliers'
                ];
                
                let removedKeys = [];
                
                keysToRemove.forEach(key => {
                    if (localStorage.getItem(key)) {
                        localStorage.removeItem(key);
                        removedKeys.push(key);
                    }
                });
                
                // Nettoyer aussi sessionStorage
                sessionStorage.clear();
                
                results.innerHTML = `
                    <h2>‚úÖ Nettoyage Termin√©</h2>
                    <p><strong>Cl√©s supprim√©es du localStorage:</strong></p>
                    <ul>
                        ${removedKeys.map(key => `<li>${key}</li>`).join('')}
                    </ul>
                    <p><strong>SessionStorage:</strong> Vid√© compl√®tement</p>
                    
                    <h3>üìã Actions Suivantes:</h3>
                    <ol>
                        <li>Fermez cet onglet</li>
                        <li>Rafra√Æchissez la page du dashboard (Ctrl+F5)</li>
                        <li>L'indicateur devrait maintenant afficher: üê¨ MySQL Local</li>
                        <li>Plus de message "Non Synchronis√©"</li>
                    </ol>
                    
                    <div style="background: #e8f5e8; padding: 15px; border-radius: 8px; margin-top: 20px;">
                        <strong>‚úÖ Cache nettoy√© avec succ√®s !</strong><br>
                        Le frontend va maintenant se synchroniser automatiquement avec le backend.
                    </div>
                `;
                
            } catch (error) {
                results.innerHTML = `
                    <h2>‚ùå Erreur</h2>
                    <p>Erreur lors du nettoyage: ${error.message}</p>
                `;
            }
        }
        
        // Ex√©cuter automatiquement au chargement
        clearFrontendCache();
    </script>
</body>
</html>