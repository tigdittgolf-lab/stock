<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test URL Production Directe</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
        .success { background-color: #d4edda; border-color: #c3e6cb; }
        .error { background-color: #f8d7da; border-color: #f5c6cb; }
        .info { background-color: #d1ecf1; border-color: #bee5eb; }
        button { padding: 10px 15px; margin: 5px; cursor: pointer; }
        .result { margin-top: 10px; padding: 10px; background-color: #f8f9fa; border-radius: 3px; }
        pre { background-color: #f8f9fa; padding: 10px; border-radius: 3px; overflow-x: auto; }
        a { color: #007bff; text-decoration: none; }
        a:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <h1>ğŸ” Test URL Production - Bouton Modifier</h1>
    
    <div class="test-section info">
        <h2>ğŸ“ URLs de Production Disponibles</h2>
        <p><strong>URL Fixe (utilisÃ©e par l'utilisateur):</strong></p>
        <p><a href="https://frontend-iota-six-72.vercel.app/delivery-notes/list" target="_blank">https://frontend-iota-six-72.vercel.app/delivery-notes/list</a></p>
        
        <p><strong>URL DerniÃ¨re DÃ©ployÃ©e:</strong></p>
        <p><a href="https://st-article-1-r72koiuyt-tigdittgolf-9191s-projects.vercel.app/delivery-notes/list" target="_blank">https://st-article-1-r72koiuyt-tigdittgolf-9191s-projects.vercel.app/delivery-notes/list</a></p>
        
        <p><strong>URL PrÃ©cÃ©dente:</strong></p>
        <p><a href="https://st-article-1-krsqf17h5-tigdittgolf-9191s-projects.vercel.app/delivery-notes/list" target="_blank">https://st-article-1-krsqf17h5-tigdittgolf-9191s-projects.vercel.app/delivery-notes/list</a></p>
    </div>

    <div class="test-section">
        <h2>ğŸ”„ Test Cache et DÃ©ploiement</h2>
        <button onclick="testLatestDeployment()">Tester Dernier DÃ©ploiement</button>
        <button onclick="clearCacheAndTest()">Vider Cache et Tester</button>
        <div id="deploymentResult" class="result"></div>
    </div>

    <div class="test-section">
        <h2>ğŸ” VÃ©rification Code Source</h2>
        <button onclick="checkSourceCode()">VÃ©rifier Code Source</button>
        <div id="sourceResult" class="result"></div>
    </div>

    <div class="test-section">
        <h2>ğŸ¯ Actions RecommandÃ©es</h2>
        <div class="info">
            <h3>Si vous ne voyez pas le bouton "Modifier" :</h3>
            <ol>
                <li><strong>Vider le cache du navigateur :</strong>
                    <ul>
                        <li>Chrome/Edge : Ctrl+Shift+R ou F12 â†’ Network â†’ Disable cache</li>
                        <li>Firefox : Ctrl+Shift+R</li>
                        <li>Safari : Cmd+Option+R</li>
                    </ul>
                </li>
                <li><strong>Essayer l'URL du dernier dÃ©ploiement :</strong>
                    <br><a href="https://st-article-1-r72koiuyt-tigdittgolf-9191s-projects.vercel.app/delivery-notes/list" target="_blank">https://st-article-1-r72koiuyt-tigdittgolf-9191s-projects.vercel.app/delivery-notes/list</a>
                </li>
                <li><strong>Mode navigation privÃ©e :</strong> Ouvrir dans un onglet privÃ©/incognito</li>
                <li><strong>Attendre la propagation :</strong> Parfois 2-3 minutes pour la mise Ã  jour</li>
            </ol>
        </div>
    </div>

    <div class="test-section">
        <h2>ğŸ‰ Ce que vous devriez voir</h2>
        <div class="success">
            <h3>Dans la colonne "Actions" de chaque BL :</h3>
            <p><strong>Avant :</strong> [ğŸ‘ï¸ Voir] [ğŸ—‘ï¸ Supprimer] [ğŸ“„ BL Complet] [ğŸ“„ BL RÃ©duit] [ğŸ« Ticket]</p>
            <p><strong>Maintenant :</strong> [ğŸ‘ï¸ Voir] <strong style="color: #28a745;">[âœï¸ Modifier]</strong> [ğŸ—‘ï¸ Supprimer] [ğŸ“„ BL Complet] [ğŸ“„ BL RÃ©duit] [ğŸ« Ticket]</p>
            
            <h3>Le bouton "âœï¸ Modifier" devrait :</h3>
            <ul>
                <li>ÃŠtre de couleur verte (#28a745)</li>
                <li>ÃŠtre placÃ© entre "ğŸ‘ï¸ Voir" et "ğŸ—‘ï¸ Supprimer"</li>
                <li>Rediriger vers /delivery-notes/{id}/edit</li>
            </ul>
        </div>
    </div>

    <script>
        async function testLatestDeployment() {
            const resultDiv = document.getElementById('deploymentResult');
            resultDiv.innerHTML = 'ğŸ”„ Test en cours...';
            
            try {
                const latestUrl = 'https://st-article-1-r72koiuyt-tigdittgolf-9191s-projects.vercel.app/delivery-notes/list';
                const response = await fetch(latestUrl);
                const html = await response.text();
                
                const hasModifierButton = html.includes('âœï¸ Modifier') || html.includes('Modifier');
                const hasModifierStyle = html.includes('#28a745') && html.includes('Modifier');
                
                if (hasModifierButton && hasModifierStyle) {
                    resultDiv.innerHTML = `
                        <div class="success">
                            âœ… <strong>SUCCÃˆS:</strong> Bouton "Modifier" dÃ©tectÃ© dans le dernier dÃ©ploiement !<br>
                            ğŸ“ URL testÃ©e: ${latestUrl}<br>
                            ğŸ¯ Le bouton devrait Ãªtre visible maintenant<br>
                            ğŸ’¡ <strong>Essayez cette URL directement ou videz votre cache</strong>
                        </div>
                    `;
                } else if (hasModifierButton) {
                    resultDiv.innerHTML = `
                        <div class="info">
                            âš ï¸ <strong>PARTIEL:</strong> Bouton "Modifier" dÃ©tectÃ© mais style peut-Ãªtre manquant<br>
                            ğŸ“ URL testÃ©e: ${latestUrl}<br>
                            ğŸ’¡ Essayez de vider le cache du navigateur
                        </div>
                    `;
                } else {
                    resultDiv.innerHTML = `
                        <div class="error">
                            âŒ <strong>PROBLÃˆME:</strong> Bouton "Modifier" non trouvÃ© dans le dernier dÃ©ploiement<br>
                            ğŸ“ URL testÃ©e: ${latestUrl}<br>
                            ğŸ”„ Le dÃ©ploiement peut ne pas avoir pris effet
                        </div>
                    `;
                }
            } catch (error) {
                resultDiv.innerHTML = `
                    <div class="error">
                        âŒ <strong>ERREUR:</strong> ${error.message}
                    </div>
                `;
            }
        }

        async function clearCacheAndTest() {
            const resultDiv = document.getElementById('deploymentResult');
            resultDiv.innerHTML = `
                <div class="info">
                    ğŸ”„ <strong>Instructions pour vider le cache :</strong><br><br>
                    <strong>1. Chrome/Edge :</strong><br>
                    - Appuyez sur F12 pour ouvrir les outils dÃ©veloppeur<br>
                    - Allez dans l'onglet "Network"<br>
                    - Cochez "Disable cache"<br>
                    - Rechargez la page avec Ctrl+Shift+R<br><br>
                    
                    <strong>2. Firefox :</strong><br>
                    - Appuyez sur Ctrl+Shift+R pour un rechargement forcÃ©<br><br>
                    
                    <strong>3. Safari :</strong><br>
                    - Appuyez sur Cmd+Option+R<br><br>
                    
                    <strong>4. Mode Incognito/PrivÃ© :</strong><br>
                    - Ouvrez un nouvel onglet privÃ©<br>
                    - Allez sur : <a href="https://st-article-1-r72koiuyt-tigdittgolf-9191s-projects.vercel.app/delivery-notes/list" target="_blank">URL du dernier dÃ©ploiement</a>
                </div>
            `;
        }

        async function checkSourceCode() {
            const resultDiv = document.getElementById('sourceResult');
            resultDiv.innerHTML = 'ğŸ” VÃ©rification du code source...';
            
            try {
                const urls = [
                    'https://frontend-iota-six-72.vercel.app/delivery-notes/list',
                    'https://st-article-1-r72koiuyt-tigdittgolf-9191s-projects.vercel.app/delivery-notes/list'
                ];
                
                let results = [];
                
                for (const url of urls) {
                    try {
                        const response = await fetch(url);
                        const html = await response.text();
                        
                        const hasModifier = html.includes('âœï¸ Modifier');
                        const hasModifierStyle = html.includes('#28a745');
                        const hasModifierFunction = html.includes('router.push') && html.includes('/edit');
                        
                        results.push({
                            url: url.includes('frontend-iota-six-72') ? 'URL Fixe' : 'Dernier DÃ©ploiement',
                            fullUrl: url,
                            hasModifier,
                            hasModifierStyle,
                            hasModifierFunction,
                            status: response.status
                        });
                    } catch (e) {
                        results.push({
                            url: url.includes('frontend-iota-six-72') ? 'URL Fixe' : 'Dernier DÃ©ploiement',
                            fullUrl: url,
                            error: e.message
                        });
                    }
                }
                
                let resultHtml = '<h4>ğŸ“Š RÃ©sultats de vÃ©rification :</h4>';
                results.forEach(result => {
                    if (result.error) {
                        resultHtml += `
                            <div class="error">
                                âŒ <strong>${result.url}:</strong> Erreur - ${result.error}
                            </div>
                        `;
                    } else {
                        const status = result.hasModifier && result.hasModifierStyle && result.hasModifierFunction ? 'success' : 'error';
                        resultHtml += `
                            <div class="${status}">
                                ${status === 'success' ? 'âœ…' : 'âŒ'} <strong>${result.url}:</strong><br>
                                - Bouton Modifier: ${result.hasModifier ? 'âœ…' : 'âŒ'}<br>
                                - Style Modifier: ${result.hasModifierStyle ? 'âœ…' : 'âŒ'}<br>
                                - Fonction Modifier: ${result.hasModifierFunction ? 'âœ…' : 'âŒ'}<br>
                                - Status HTTP: ${result.status}<br>
                                <small>URL: ${result.fullUrl}</small>
                            </div>
                        `;
                    }
                });
                
                resultDiv.innerHTML = resultHtml;
                
            } catch (error) {
                resultDiv.innerHTML = `
                    <div class="error">
                        âŒ <strong>ERREUR:</strong> ${error.message}
                    </div>
                `;
            }
        }

        // Auto-exÃ©cuter le test au chargement
        window.onload = function() {
            console.log('ğŸ” Page de test chargÃ©e');
            console.log('ğŸ“ URLs Ã  tester:');
            console.log('- URL Fixe: https://frontend-iota-six-72.vercel.app/delivery-notes/list');
            console.log('- Dernier dÃ©ploiement: https://st-article-1-r72koiuyt-tigdittgolf-9191s-projects.vercel.app/delivery-notes/list');
            
            // Lancer automatiquement le test
            setTimeout(testLatestDeployment, 1000);
        };
    </script>
</body>
</html>