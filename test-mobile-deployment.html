<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Mobile Deployment - Stock Management</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f5f5f5;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .status {
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
        }
        .success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .warning { background: #fff3cd; color: #856404; border: 1px solid #ffeaa7; }
        .info { background: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }
        .button {
            display: inline-block;
            padding: 12px 20px;
            background: #007bff;
            color: white;
            text-decoration: none;
            border-radius: 6px;
            margin: 5px;
            font-weight: bold;
        }
        .button:hover { background: #0056b3; }
        .mobile-test {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }
        @media (max-width: 768px) {
            .mobile-indicator {
                background: #28a745;
                color: white;
                padding: 10px;
                border-radius: 5px;
                text-align: center;
                font-weight: bold;
            }
        }
        @media (min-width: 769px) {
            .mobile-indicator {
                background: #6c757d;
                color: white;
                padding: 10px;
                border-radius: 5px;
                text-align: center;
                font-weight: bold;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üöÄ Test de D√©ploiement Mobile</h1>
        
        <div class="mobile-indicator" id="deviceIndicator">
            üì± D√©tection de l'appareil en cours...
        </div>
        
        <div class="status success">
            <h3>‚úÖ D√©ploiement Effectu√©</h3>
            <p><strong>Commit:</strong> Fix mobile responsiveness</p>
            <p><strong>Heure:</strong> <span id="deployTime"></span></p>
            <p><strong>Status:</strong> Pouss√© vers GitHub et Vercel</p>
        </div>
        
        <div class="status info">
            <h3>üì± Am√©liorations Mobile</h3>
            <ul>
                <li>‚úÖ Interface responsive (mobile-first)</li>
                <li>‚úÖ Cartes tactiles pour BL et factures</li>
                <li>‚úÖ Boutons plus grands pour mobile</li>
                <li>‚úÖ Espacement optimis√© pour iPhone</li>
                <li>‚úÖ PDF accessible sur mobile</li>
            </ul>
        </div>
        
        <div class="mobile-test">
            <h3>üß™ Test des Fonctionnalit√©s</h3>
            <p>Testez ces liens sur votre iPhone:</p>
            
            <a href="https://frontend-iota-six-72.vercel.app/delivery-notes/list?v=mobile" class="button">
                üìã Liste BL (Mobile)
            </a>
            
            <a href="https://frontend-iota-six-72.vercel.app/invoices/list?v=mobile" class="button">
                üßæ Liste Factures (Mobile)
            </a>
            
            <a href="https://frontend-iota-six-72.vercel.app/dashboard?v=mobile" class="button">
                üè† Dashboard (Mobile)
            </a>
        </div>
        
        <div class="status warning">
            <h3>‚è≥ Instructions pour votre ami</h3>
            <ol>
                <li>Ouvrir Safari sur iPhone</li>
                <li>Aller sur: <strong>https://frontend-iota-six-72.vercel.app</strong></li>
                <li>Se connecter avec les m√™mes identifiants</li>
                <li>Naviguer vers "Liste BL" ou "Liste Factures"</li>
                <li>V√©rifier que l'interface est maintenant mobile-friendly</li>
            </ol>
        </div>
        
        <div class="status info">
            <h3>üîß Si le probl√®me persiste</h3>
            <p>Demandez √† votre ami de:</p>
            <ul>
                <li>Vider le cache Safari (R√©glages > Safari > Effacer historique)</li>
                <li>Fermer et rouvrir Safari</li>
                <li>Essayer en mode priv√©</li>
                <li>Ajouter <code>?v=mobile</code> √† la fin de l'URL</li>
            </ul>
        </div>
        
        <div id="deploymentStatus" class="status info">
            <h3>üìä Status de D√©ploiement</h3>
            <p id="statusText">V√©rification en cours...</p>
        </div>
    </div>

    <script>
        // D√©tecter le type d'appareil
        function detectDevice() {
            const indicator = document.getElementById('deviceIndicator');
            const isMobile = window.innerWidth <= 768;
            
            if (isMobile) {
                indicator.textContent = 'üì± Appareil Mobile D√©tect√© - Interface Optimis√©e';
                indicator.style.background = '#28a745';
            } else {
                indicator.textContent = 'üíª Appareil Desktop D√©tect√© - Version Compl√®te';
                indicator.style.background = '#6c757d';
            }
        }
        
        // Afficher l'heure de d√©ploiement
        document.getElementById('deployTime').textContent = new Date().toLocaleString('fr-FR');
        
        // D√©tecter l'appareil au chargement et au redimensionnement
        detectDevice();
        window.addEventListener('resize', detectDevice);
        
        // V√©rifier le status de d√©ploiement
        async function checkDeploymentStatus() {
            const statusElement = document.getElementById('statusText');
            
            try {
                // Tester l'acc√®s √† l'application
                const response = await fetch('https://frontend-iota-six-72.vercel.app/api/health', {
                    method: 'GET',
                    cache: 'no-cache'
                });
                
                if (response.ok) {
                    statusElement.innerHTML = '‚úÖ <strong>Application accessible</strong><br>Le d√©ploiement mobile devrait √™tre actif dans 1-2 minutes.';
                } else {
                    statusElement.innerHTML = '‚ö†Ô∏è <strong>D√©ploiement en cours</strong><br>Veuillez patienter quelques minutes.';
                }
            } catch (error) {
                statusElement.innerHTML = 'üîÑ <strong>V√©rification...</strong><br>Le d√©ploiement Vercel peut prendre 2-3 minutes.';
            }
        }
        
        // V√©rifier le status au chargement
        checkDeploymentStatus();
        
        // Rev√©rifier toutes les 30 secondes
        setInterval(checkDeploymentStatus, 30000);
    </script>
</body>
</html>